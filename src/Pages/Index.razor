@page  "/"
@page  "/{bankerToken}"
@using Funpoly.Features.Games.GameList;
@using Funpoly.Core
@using Funpoly.Data.Models
@using Funpoly.Data.Repositories.Interfaces
@using Funpoly.Features.Teams

@inject Blazored.LocalStorage.ILocalStorageService localStorage
@inject IGameManager gameManager
@inject IRepository<Game> gameRepository
@inject NavigationManager navManager

@if (isInitialised)
{
    <CascadingValue Name="IsBanker" Value="@isBanker">
        @if (gameManager.GetGame() == null || gameManager.GetGame().Status == GameStatus.NotStarted || gameManager.GetGame().Status == GameStatus.Finished)
        {
            @if (isBanker)
            {
                <GameList></GameList>
            }
            else
            {
                //TODO: Vertical center
                <Heading Size="HeadingSize.Is3" Alignment="TextAlignment.Center ">
                    El banquero está ordenando los billetes. Espera un poco...
                </Heading>
            }
        }

        else if (gameManager.GetGame().Status == GameStatus.TeamsConfig)
        {
            @if (isBanker)
            {
                <TeamList />
            }
            else
            {
                <TeamForm />
            }

        }
        else if (gameManager.GetGame().Status == GameStatus.OnGoing)
        {
            <GameView></GameView>
        }
    </CascadingValue>
}